<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>온라인 허니문 플래너</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        signInWithCustomToken,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        setLogLevel,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
      window.firebase = {
        initializeApp,
        getAuth,
        signInAnonymously,
        signInWithCustomToken,
        getFirestore,
        setLogLevel,
        "베이징·상하이": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→베이징 도착, 호텔 체크인",
            "Day 2: 천안문광장, 자금성, 왕푸징거리",
            "Day 3: 만리장성(바달링), 명13릉",
            "Day 4: 이화원, 천단공원",
            "Day 5: 베이징→상하이 이동(고속철), 와이탄 야경",
            "Day 6: 예원, 남경로, 상하이 타워",
            "Day 7: 상하이→인천 귀국",
          ],
        },
        "홍콩·하이난": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→홍콩 도착, 침사추이 야경",
            "Day 2: 빅토리아 피크, 센트럴, 란콰이퐁",
            "Day 3: 디즈니랜드 또는 오션파크",
            "Day 4: 홍콩→하이난 이동, 야롱베이 해변",
            "Day 5: 우즈저우다오 다이빙, 수상 스포츠",
            "Day 6: 난산 사원, 리조트 휴양",
            "Day 7: 하이난→인천 귀국",
          ],
        },
        "청두·구이린": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→청두 도착, 진리거리",
            "Day 2: 판다 기지, 무허우츠 사원",
            "Day 3: 두장옌, 청양궁",
            "Day 4: 청두→구이린 이동(고속철)",
            "Day 5: 리강 유람선, 양숴",
            "Day 6: 용척계단식논, 소수민족 마을",
            "Day 7: 구이린→인천 귀국",
          ],
        },
        "울란바토르·고비사막": {
          days: "4박5일",
          itinerary: [
            "Day 1: 인천→울란바토르 도착, 자이승 전망대",
            "Day 2: 테를지 국립공원, 칭기즈칸 동상",
            "Day 3: 미니고비사막(엘센 타사르카이), 낙타 체험",
            "Day 4: 초원 게르 캠프, 승마 체험, 은하수 관찰",
            "Day 5: 울란바토르 시내 관광→인천 귀국",
          ],
        },
        "카트만두·포카라": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→카트만두 도착, 타멜거리",
            "Day 2: 스와얌부나트(원숭이 사원), 파슈파티나트",
            "Day 3: 카트만두→포카라 이동, 페와 호수",
            "Day 4: 사랑콧 미니트레킹, 패러글라이딩",
            "Day 5: 안나푸르나 베이스캠프 조망",
            "Day 6: 포카라→카트만두 이동, 더르바르 광장",
            "Day 7: 카트만두→인천 귀국",
          ],
        },
        아피아: {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→(경유)→아피아 도착",
            "Day 2: 투 수아 해양 참호(To Sua Trench)",
            "Day 3: 라로통가 해변, 스노클링",
            "Day 4: 알로파우타이 폭포, 전통 마을 투어",
            "Day 5: 리조트 휴양, 수상 스포츠",
            "Day 6: 사바이이 섬 데이 트립",
            "Day 7: 아피아→(경유)→인천 귀국",
          ],
        },
        "빈·잘츠부르크": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→빈 도착, 링슈트라세 산책",
            "Day 2: 쉰브룬 궁전, 벨베데레 궁전",
            "Day 3: 슈테판 대성당, 오페라 하우스",
            "Day 4: 빈→잘츠부르크 이동, 미라벨 정원",
            "Day 5: 호엔잘츠부르크 성, 게트라이데 거리",
            "Day 6: 할슈타트 당일치기",
            "Day 7: 잘츠부르크→인천 귀국",
          ],
        },
        부다페스트: {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→부다페스트 도착",
            "Day 2: 부다 성, 어부의 요새, 마차시 성당",
            "Day 3: 세체니 온천, 영웅광장",
            "Day 4: 도나우강 유람선, 국회의사당 야경",
            "Day 5: 중앙시장, 안드라시 거리",
            "Day 6: 센텐드레 또는 에게르 당일치기",
            "Day 7: 부다페스트→인천 귀국",
          ],
        },
        "크라쿠프·바르샤바": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→크라쿠프 도착",
            "Day 2: 구시가지 광장, 바벨 성",
            "Day 3: 아우슈비츠 비르케나우 수용소",
            "Day 4: 크라쿠프→바르샤바 이동(고속열차)",
            "Day 5: 구시가지 광장, 왕궁",
            "Day 6: 와지엔키 공원, 쇼팽 박물관",
            "Day 7: 바르샤바→인천 귀국",
          ],
        },
        "마누엘 안토니오": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→산호세 도착→마누엘 안토니오 이동",
            "Day 2: 마누엘 안토니오 국립공원 트레킹",
            "Day 3: 비치 휴양, 서핑 레슨",
            "Day 4: 집라인 어드벤처, 폭포 투어",
            "Day 5: 카약, 스노클링",
            "Day 6: 리조트 휴양",
            "Day 7: 산호세→인천 귀국",
          ],
        },
        리몬: {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→산호세 도착→리몬 이동",
            "Day 2: 토르투게로 국립공원, 바다거북 관찰",
            "Day 3: 카후이타 국립공원, 카리브해 해변",
            "Day 4: 푸에르토 비에호, 스노클링",
            "Day 5: 재규어 구조센터, 초콜릿 투어",
            "Day 6: 리몬 해변 휴양",
            "Day 7: 산호세→인천 귀국",
          ],
        },
        "우유니 소금사막": {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→라파스 도착, 고산 적응",
            "Day 2: 라파스 시내 관광, 달의 계곡",
            "Day 3: 라파스→우유니 이동(버스 or 비행기)",
            "Day 4: 우유니 소금사막 투어(거울 효과)",
            "Day 5: 일출 투어, 선인장 섬(인카와시)",
            "Day 6: 우유니→라파스 이동",
            "Day 7: 라파스→인천 귀국",
          ],
        },
        아바나: {
          days: "5박7일",
          itinerary: [
            "Day 1: 인천→(경유)→아바나 도착",
            "Day 2: 구시가지, 말레콘 해변도로",
            "Day 3: 올드카 투어, 모히토 바",
            "Day 4: 비냘레스 계곡 당일치기",
            "Day 5: 헤밍웨이 박물관, 시가 공장",
            "Day 6: 바라데로 해변 당일치기",
            "Day 7: 아바나→(경유)→인천 귀국",
          ],
        },
      };
    </script>
    <style>
      @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css");
      body {
        margin: 0;
        padding: 0;
        border: 0;
        vertical-align: baseline;
        font-family: "Pretendard", sans-serif;
        line-height: 1.5;
        letter-spacing: -0.028rem;
      }
      @keyframes bounce-slow {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .animate-bounce-slow {
        animation: bounce-slow 4s infinite ease-in-out;
      }
      @keyframes pulse-once {
        0% {
          transform: scale(0.8);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      .animate-pulse-once {
        animation: pulse-once 0.5s ease-out;
      }
      .card:hover {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        animation: fadeIn 0.3s ease-in-out;
      }
      .modal.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: white;
        border-radius: 20px;
        padding: 0;
        max-width: 900px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        animation: slideUp 0.3s ease-out;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes slideUp {
        from {
          transform: translateY(50px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      .map-container {
        width: 100%;
        height: 400px;
        border-radius: 12px 12px 0 0;
      }
    </style>
  </head>
  <body id="root"></body>
</html>

<script>
  // 비행시간 정보: 국가별로 인천 출발 기준 비행 소요 시간
  const flightTimes = {
    인도네시아: "7시간 30분",
    태국: "5시간 30분",
    베트남: "5시간",
    일본: "2시간",
    필리핀: "4시간",
    말레이시아: "6시간 30분",
    아랍에미리트: "9시간",
    튀르키예: "11시간",
    몰디브: "9시간 30분",
    싱가포르: "6시간 20분",
    호주: "10시간",
    "프렌치 폴리네시아": "14시간",
    뉴질랜드: "11시간",
    피지: "12시간",
    "뉴칼레도니아·바누아투": "13시간",
    프랑스: "13시간",
    이탈리아: "12시간 30분",
    스위스: "12시간",
    스페인: "13시간 30분",
    포르투갈: "14시간",
    독일: "12시간",
    노르웨이: "11시간 30분",
    핀란드: "10시간 30분",
    스웨덴: "11시간",
    그리스: "12시간",
    영국: "12시간",
    체코: "11시간 30분",
    크로아티아: "12시간",
    슬로베니아: "12시간",
    덴마크: "11시간",
    미국: "13시간",
    캐나다: "11시간",
    멕시코: "14시간",
    칠레: "24시간",
    페루: "23시간",
    바하마: "16시간",
    브라질: "25시간",
    아르헨티나: "26시간",
    탄자니아: "15시간",
    케냐: "14시간 30분",
    모로코: "14시간",
    이집트: "12시간 30분",
    모리셔스: "12시간",
    세이셸: "11시간 30분",
  };

  // 여행지 데이터 배열: 각 여행지의 이름, 국가, 대륙, 분위기, 예산, 여행 타입, 추천 월, 팁 등 포함
  const destinationsData = [
    {
      name: "발리",
      country: "인도네시아",
      continent: "아시아",
      vibe: "럭셔리 휴양 & 힐링",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광+휴양",
      bestMonths: [4, 5, 6, 7, 8, 9, 10],
      goodMonths: [1, 2, 3, 11, 12],
      note: "건기인 4월~10월이 최적기. 우붓의 논 뷰 리조트와 스미냑의 비치 클럽 추천.",
    },
    {
      name: "롬복",
      country: "인도네시아",
      continent: "아시아",
      vibe: "프라이빗 휴양",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [4, 5, 6, 7, 8, 9, 10],
      goodMonths: [1, 2, 3, 11, 12],
      note: "길리 섬(Gili Islands)에서의 스노클링 및 다이빙 명소. 발리보다 조용하고 프라이빗함.",
    },
    {
      name: "몰디브",
      country: "몰디브",
      continent: "아시아",
      vibe: "궁극의 럭셔리",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [11, 12, 1, 2, 3],
      goodMonths: [4, 10],
      note: "워터 빌라에서의 로맨틱한 경험. 섬마다 리조트 분위기가 다름.",
    },
    {
      name: "푸켓·카오락",
      country: "태국",
      continent: "아시아",
      vibe: "가성비 & 액티비티",
      budget: "낮음(~ 500만원)",
      travelType: "관광+휴양",
      bestMonths: [11, 12, 1, 2, 3],
      goodMonths: [4, 10],
      note: "겨울철 건기가 가장 좋음. 빠통, 카론 등 지역별 특색 확인. 피피섬 투어 필수.",
    },
    {
      name: "코사무이",
      country: "태국",
      continent: "아시아",
      vibe: "고요한 휴양",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [2, 3, 4],
      goodMonths: [1, 5, 12],
      note: "타이만의 아름다운 섬. 건기가 짧고 우기가 비교적 덜 심함.",
    },
    {
      name: "방콕·치앙마이",
      country: "태국",
      continent: "아시아",
      vibe: "문화 & 미식",
      budget: "낮음(~ 500만원)",
      travelType: "관광+휴양",
      bestMonths: [11, 12, 1, 2],
      goodMonths: [3, 10],
      note: "북부(치앙마이)와 수도(방콕)를 잇는 문화 체험 중심의 여행.",
    },
    {
      name: "다낭·호이안",
      country: "베트남",
      continent: "아시아",
      vibe: "문화 & 비치",
      budget: "낮음(~ 500만원)",
      travelType: "관광+휴양",
      bestMonths: [2, 3, 4, 5, 6],
      goodMonths: [1, 7, 8, 9, 11],
      note: "베트남 중부 최대의 해변 도시와 유네스코 세계문화유산 호이안의 조화",
    },
    {
      name: "푸꾸옥",
      country: "베트남",
      continent: "아시아",
      vibe: "조용한 섬",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [11, 12, 1, 2, 3, 4],
      goodMonths: [5, 10],
      note: "베트남 최남단의 열대 섬. 아름다운 선셋과 프라이빗 리조트",
    },
    {
      name: "나트랑",
      country: "베트남",
      continent: "아시아",
      vibe: "해양 스포츠",
      budget: "낮음(~ 500만원)",
      travelType: "관광+휴양",
      bestMonths: [1, 2, 3, 4, 5],
      goodMonths: [6, 11, 12],
      note: "베트남의 대표적인 해양 휴양지. 스노클링과 머드 스파가 유명",
    },
    {
      name: "도쿄·교토",
      country: "일본",
      continent: "아시아",
      vibe: "전통 & 현대",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [3, 4, 5, 10, 11],
      goodMonths: [2, 6, 9, 12],
      note: "일본의 수도와 고도(古都)를 잇는 문화 여행. 벚꽃(3~4월)과 단풍(11월) 시즌 추천",
    },
    {
      name: "삿포로",
      country: "일본",
      continent: "아시아",
      vibe: "설국 로맨스",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광+휴양",
      bestMonths: [7, 8],
      goodMonths: [6, 9, 12, 1, 2],
      note: "여름은 시원하고 쾌적. 겨울은 눈 축제와 스키 명소",
    },
    {
      name: "오키나와",
      country: "일본",
      continent: "아시아",
      vibe: "열대 해양",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [4, 5, 10, 11],
      goodMonths: [3, 6, 12],
      note: "일본 최남단의 열대 섬. 에메랄드빛 바다와 산호초",
    },
    {
      name: "홋카이도",
      country: "일본",
      continent: "아시아",
      vibe: "자연 & 온천",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광+휴양",
      bestMonths: [7, 8],
      goodMonths: [6, 9, 12, 1, 2],
      note: "광활한 자연과 온천. 여름은 라벤더, 겨울은 설경과 스키",
    },
    {
      name: "세부·보홀·보라카이",
      country: "필리핀",
      continent: "아시아",
      vibe: "해양 천국",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3, 4, 5],
      goodMonths: [11, 6],
      note: "필리핀의 대표적인 해양 휴양지. 세부는 다이빙, 보홀은 자연, 보라카이는 화이트비치가 유명",
    },
    {
      name: "코타키나발루",
      country: "말레이시아",
      continent: "아시아",
      vibe: "자연 & 휴양",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광+휴양",
      bestMonths: [3, 4, 5, 6, 7, 8],
      goodMonths: [2, 9, 10],
      note: "보르네오 섬의 관문. 키나발루 산과 석양이 아름다운 해변",
    },
    {
      name: "랑카위",
      country: "말레이시아",
      continent: "아시아",
      vibe: "열대 섬",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [11, 4],
      note: "말레이시아 최북단의 면세 섬. 케이블카와 스카이브리지가 유명",
    },
    {
      name: "두바이·아부다비",
      country: "아랍에미리트",
      continent: "아시아",
      vibe: "럭셔리 & 사막",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광+휴양",
      bestMonths: [11, 12, 1, 2, 3],
      goodMonths: [4, 10],
      note: "사막 사파리와 쇼핑.",
    },
    {
      name: "이스탄불",
      country: "튀르키예",
      continent: "아시아",
      vibe: "동서양 문화",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [4, 5, 9, 10],
      goodMonths: [3, 6, 11],
      note: "모스크와 바자르.",
    },
    {
      name: "싱가포르",
      country: "싱가포르",
      continent: "아시아",
      vibe: "도시 & 미식",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [2, 3, 4, 7, 8],
      goodMonths: [1, 5, 6, 9, 10, 11, 12],
      note: "도시국가의 완벽한 인프라. 마리나베이샌즈와 가든스바이더베이 필수 코스",
    },
    {
      name: "시드니",
      country: "호주",
      continent: "오세아니아",
      vibe: "도시 & 자연",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광+휴양",
      bestMonths: [12, 1, 2],
      goodMonths: [3, 11],
      note: "남반구 여름 최적.",
    },
    {
      name: "타히티",
      country: "프렌치 폴리네시아",
      continent: "오세아니아",
      vibe: "열대 낙원",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [5, 6, 7, 8, 9, 10],
      goodMonths: [4, 11],
      note: "오버워터 방갈로.",
    },
    {
      name: "뉴질랜드",
      country: "뉴질랜드",
      continent: "오세아니아",
      vibe: "어드벤처",
      budget: "매우 높음(1200만원 ~)",
      travelType: "액티비티",
      bestMonths: [1, 2, 3],
      goodMonths: [12, 4],
      note: "퀸스타운 번지점프.",
    },
    {
      name: "피지",
      country: "피지",
      continent: "오세아니아",
      vibe: "열대 섬",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [5, 6, 7, 8, 9, 10],
      goodMonths: [4, 11],
      note: "남태평양의 보석.",
    },
    {
      name: "뉴칼레도니아·바누아투",
      country: "뉴칼레도니아·바누아투",
      continent: "오세아니아",
      vibe: "미지의 열대",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [9, 10, 11],
      goodMonths: [4, 5, 8],
      note: "원시적 자연.",
    },
    {
      name: "파리·노르망디",
      country: "프랑스",
      continent: "유럽",
      vibe: "클래식 로맨스",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7],
      note: "에펠탑, 루브르.",
    },
    {
      name: "프로방스·니스",
      country: "프랑스",
      continent: "유럽",
      vibe: "지중해 휴양",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [5, 6, 7, 8, 9],
      goodMonths: [4, 10],
      note: "프로방스와 코트다쥐르.",
    },
    {
      name: "베네치아·밀라노",
      country: "이탈리아",
      continent: "유럽",
      vibe: "예술 & 역사",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7],
      note: "베네치아, 밀라노.",
    },
    {
      name: "로마·피렌체",
      country: "이탈리아",
      continent: "유럽",
      vibe: "르네상스",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 11],
      note: "로마, 피렌체.",
    },
    {
      name: "아말피",
      country: "이탈리아",
      continent: "유럽",
      vibe: "해안 & 열정",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [5, 6, 7, 8, 9],
      goodMonths: [4, 10],
      note: "아말피 해안.",
    },
    {
      name: "취리히·루체른",
      country: "스위스",
      continent: "유럽",
      vibe: "알프스",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광+휴양",
      bestMonths: [6, 7, 8, 9],
      goodMonths: [5, 10],
      note: "산악 열차 코스.",
    },
    {
      name: "인터라켄·체르마트",
      country: "스위스",
      continent: "유럽",
      vibe: "산악 리조트",
      budget: "매우 높음(1200만원 ~)",
      travelType: "액티비티",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [6, 7, 8],
      note: "스키 천국.",
    },
    {
      name: "바르셀로나",
      country: "스페인",
      continent: "유럽",
      vibe: "해안 & 미식",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7, 8],
      note: "바르셀로나 가우디.",
    },
    {
      name: "마드리드",
      country: "스페인",
      continent: "유럽",
      vibe: "역사 & 문화",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 11],
      note: "마드리드 플라멩코.",
    },
    {
      name: "세비야·그라나다",
      country: "스페인",
      continent: "유럽",
      vibe: "안달루시아",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 11],
      note: "세비야 그라나다.",
    },
    {
      name: "카나리아 제도",
      country: "스페인",
      continent: "유럽",
      vibe: "아열대 섬",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [1, 2, 3, 4, 5, 11, 12],
      goodMonths: [6, 10],
      note: "연중 온화한 기후.",
    },
    {
      name: "포르투",
      country: "포르투갈",
      continent: "유럽",
      vibe: "포트와인",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7],
      note: "포르투 와인 투어.",
    },
    {
      name: "리스본·알가르베",
      country: "포르투갈",
      continent: "유럽",
      vibe: "수도 & 해안",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 11],
      note: "리스본 알가르브.",
    },
    {
      name: "마데이라 제도",
      country: "포르투갈",
      continent: "유럽",
      vibe: "아열대 섬",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 7, 11],
      note: "대서양의 진주.",
    },
    {
      name: "베를린·함부르크",
      country: "독일",
      continent: "유럽",
      vibe: "성 & 문화",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 7, 8, 9],
      goodMonths: [4, 10],
      note: "노이슈반슈타인.",
    },
    {
      name: "뮌헨·알프스",
      country: "독일",
      continent: "유럽",
      vibe: "알프스 & 맥주",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8, 9],
      goodMonths: [5, 10],
      note: "뮌헨 남부 알프스.",
    },
    {
      name: "오슬로·베르겐",
      country: "노르웨이",
      continent: "유럽",
      vibe: "피오르",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [5, 6, 7, 8],
      goodMonths: [9],
      note: "송네 피오르.",
    },
    {
      name: "트론헤임",
      country: "노르웨이",
      continent: "유럽",
      vibe: "산악 & 전통",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "베르겐 중부.",
    },
    {
      name: "트롬쇠",
      country: "노르웨이",
      continent: "유럽",
      vibe: "백야 & 오로라",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "액티비티",
      bestMonths: [12, 1, 2, 6, 7],
      goodMonths: [3, 5, 8],
      note: "백야와 오로라.",
    },
    {
      name: "헬싱키",
      country: "핀란드",
      continent: "유럽",
      vibe: "호수 & 자연",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "헬싱키 호수.",
    },
    {
      name: "탐페레",
      country: "핀란드",
      continent: "유럽",
      vibe: "숲 & 호수",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "휴양",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "중부 숲과 호수.",
    },
    {
      name: "로바니에미",
      country: "핀란드",
      continent: "유럽",
      vibe: "오로라 & 사미",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "액티비티",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [6, 7, 8],
      note: "라플란드 오로라.",
    },
    {
      name: "스톡홀름·예테보리",
      country: "스웨덴",
      continent: "유럽",
      vibe: "수도 & 문화",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "스톡홀름.",
    },
    {
      name: "키루나",
      country: "스웨덴",
      continent: "유럽",
      vibe: "백야 & 자연",
      budget: "매우 높음(1200만원 ~)",
      travelType: "액티비티",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "북부 백야.",
    },
    {
      name: "그리스",
      country: "그리스",
      continent: "유럽",
      vibe: "신화 & 바다",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [5, 6, 9],
      goodMonths: [4, 7, 8, 10],
      note: "산토리니 일몰.",
    },
    {
      name: "영국",
      country: "영국",
      continent: "유럽",
      vibe: "클래식",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "런던 박물관.",
    },
    {
      name: "체코",
      country: "체코",
      continent: "유럽",
      vibe: "중세 & 낭만",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9],
      goodMonths: [4, 7, 8, 10],
      note: "프라하 구시가.",
    },
    {
      name: "크로아티아",
      country: "크로아티아",
      continent: "유럽",
      vibe: "아드리아해",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [6, 9],
      goodMonths: [5, 7, 8, 10],
      note: "두브로브니크.",
    },
    {
      name: "슬로베니아",
      country: "슬로베니아",
      continent: "유럽",
      vibe: "동화 자연",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광+휴양",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "블레드 호수.",
    },
    {
      name: "덴마크",
      country: "덴마크",
      continent: "유럽",
      vibe: "동화 & 디자인",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "코펜하겐.",
    },
    {
      name: "샌프란시스코·LA",
      country: "미국",
      continent: "미주",
      vibe: "대자연 & 도시",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 7, 8],
      note: "SF, LA, 그랜드캐니언.",
    },
    {
      name: "뉴욕·보스턴",
      country: "미국",
      continent: "미주",
      vibe: "도시 & 문화",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광",
      bestMonths: [4, 5, 6, 9, 10],
      goodMonths: [3, 11],
      note: "뉴욕 보스턴.",
    },
    {
      name: "하와이",
      country: "미국",
      continent: "미주",
      vibe: "다이나믹",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광+휴양",
      bestMonths: [4, 5, 9, 10],
      goodMonths: [3, 6, 11],
      note: "오아후 빅아일랜드.",
    },
    {
      name: "괌·사이판",
      country: "미국",
      continent: "미주",
      vibe: "가까운 휴양",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3, 4],
      goodMonths: [5, 11],
      note: "미국령 열대.",
    },
    {
      name: "밴쿠버·토론토",
      country: "캐나다",
      continent: "미주",
      vibe: "대자연 & 도시",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8, 9],
      goodMonths: [5, 10],
      note: "밴쿠버 토론토.",
    },
    {
      name: "캘거리·에드먼턴",
      country: "캐나다",
      continent: "미주",
      vibe: "자연 & 호수",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "중부 자연.",
    },
    {
      name: "칸쿤",
      country: "멕시코",
      continent: "미주",
      vibe: "카리브해",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3, 4],
      goodMonths: [5, 11],
      note: "카리브 바다.",
    },
    {
      name: "칠레",
      country: "칠레",
      continent: "미주",
      vibe: "남미 대자연",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "액티비티",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [11, 4],
      note: "파타고니아.",
    },
    {
      name: "페루",
      country: "페루",
      continent: "미주",
      vibe: "잉카 문명",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [5, 6, 7, 8, 9],
      goodMonths: [4, 10],
      note: "마추픽추.",
    },
    {
      name: "바하마",
      country: "바하마",
      continent: "미주",
      vibe: "카리브 낙원",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3, 4],
      goodMonths: [5, 11],
      note: "핑크샌드 비치.",
    },
    {
      name: "브라질",
      country: "브라질",
      continent: "미주",
      vibe: "열정 & 자연",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [11, 4],
      note: "리우 아마존.",
    },
    {
      name: "아르헨티나",
      country: "아르헨티나",
      continent: "미주",
      vibe: "탱고 & 자연",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [11, 4],
      note: "탱고 빙하.",
    },
    {
      name: "세렝게티",
      country: "탄자니아",
      continent: "아프리카",
      vibe: "사파리",
      budget: "매우 높음(1200만원 ~)",
      travelType: "액티비티",
      bestMonths: [6, 7, 8, 9, 10],
      goodMonths: [1, 2],
      note: "야생동물 사파리.",
    },
    {
      name: "잔지바르",
      country: "탄자니아",
      continent: "아프리카",
      vibe: "인도양 휴양",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [6, 7, 8, 9, 10],
      goodMonths: [1, 2, 12],
      note: "동부 해안 섬.",
    },
    {
      name: "나이로비",
      country: "케냐",
      continent: "아프리카",
      vibe: "사파리 & 문화",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "액티비티",
      bestMonths: [1, 2, 6, 7, 8, 9, 10],
      goodMonths: [12],
      note: "마사이마라.",
    },
    {
      name: "카사블랑카",
      country: "모로코",
      continent: "아프리카",
      vibe: "이슬람 & 해안",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [3, 4, 5, 10, 11],
      goodMonths: [2, 9, 12],
      note: "이슬람 문화.",
    },
    {
      name: "마라케시",
      country: "모로코",
      continent: "아프리카",
      vibe: "사막 & 바자르",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [3, 4, 5, 10, 11],
      goodMonths: [2, 9],
      note: "사하라 투어.",
    },
    {
      name: "카이로",
      country: "이집트",
      continent: "아프리카",
      vibe: "고대 문명",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [10, 11, 12, 1, 2, 3],
      goodMonths: [4, 9],
      note: "피라미드.",
    },
    {
      name: "아스완·룩소르",
      country: "이집트",
      continent: "아프리카",
      vibe: "나일강 유적",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "관광",
      bestMonths: [10, 11, 12, 1, 2, 3],
      goodMonths: [4, 9],
      note: "나일강 크루즈.",
    },
    {
      name: "후루가다",
      country: "이집트",
      continent: "아프리카",
      vibe: "홍해 휴양",
      budget: "중간(500만원 ~ 1000만원)",
      travelType: "휴양",
      bestMonths: [10, 11, 12, 1, 2, 3, 4],
      goodMonths: [5, 9],
      note: "홍해 다이빙.",
    },
    {
      name: "모리셔스",
      country: "모리셔스",
      continent: "아프리카",
      vibe: "인도양 낙원",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [5, 6, 7, 8, 9, 10, 11],
      goodMonths: [4, 12],
      note: "럭셔리 리조트.",
    },
    {
      name: "세이셸",
      country: "세이셸",
      continent: "아프리카",
      vibe: "프라이빗 아일랜드",
      budget: "매우 높음(1200만원 ~)",
      travelType: "휴양",
      bestMonths: [4, 5, 10, 11],
      goodMonths: [6, 9],
      note: "세계 최고 해변.",
    },
    {
      name: "베이징·상하이",
      country: "중국",
      continent: "아시아",
      vibe: "역사 & 현대",
      budget: "낮음(~ 500만원)",
      travelType: "관광",
      bestMonths: [4, 5, 9, 10],
      goodMonths: [3, 6, 11],
      note: "만리장성, 자금성, 상하이 야경.",
    },
    {
      name: "홍콩·하이난",
      country: "중국",
      continent: "아시아",
      vibe: "도시 & 열대",
      budget: "높음(800만원 ~ 1200만원)",
      travelType: "관광+휴양",
      bestMonths: [10, 11, 12, 1, 2],
      goodMonths: [3, 4, 9],
      note: "홍콩 쇼핑, 하이난 해변 리조트.",
    },
    {
      name: "청두·구이린",
      country: "중국",
      continent: "아시아",
      vibe: "자연 & 문화",
      budget: "낮음(~ 500만원)",
      travelType: "관광",
      bestMonths: [4, 5, 9, 10],
      goodMonths: [3, 6, 11],
      note: "판다, 카르스트 지형.",
    },
    {
      name: "울란바토르·고비사막",
      country: "몽골",
      continent: "아시아",
      vibe: "광활한 자연",
      budget: "낮음(~ 500만원)",
      travelType: "관광",
      bestMonths: [6, 7, 8],
      goodMonths: [5, 9],
      note: "초원, 유목민 문화, 사막.",
    },
    {
      name: "카트만두·포카라",
      country: "네팔",
      continent: "아시아",
      vibe: "히말라야 & 문화",
      budget: "낮음(~ 500만원)",
      travelType: "관광",
      bestMonths: [10, 11, 3, 4],
      goodMonths: [9, 12, 2, 5],
      note: "에베레스트 트레킹, 사원.",
    },
    {
      name: "아피아",
      country: "사모아",
      continent: "오세아니아",
      vibe: "열대 섬 휴양",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [5, 6, 7, 8, 9, 10],
      goodMonths: [4, 11],
      note: "남태평양의 숨은 보석.",
    },
    {
      name: "빈·잘츠부르크",
      country: "오스트리아",
      continent: "유럽",
      vibe: "클래식 & 음악",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7, 8],
      note: "모차르트, 황궁, 알프스.",
    },
    {
      name: "부다페스트",
      country: "헝가리",
      continent: "유럽",
      vibe: "온천 & 야경",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7, 8],
      note: "도나우강, 온천욕.",
    },
    {
      name: "크라쿠프·바르샤바",
      country: "폴란드",
      continent: "유럽",
      vibe: "역사 & 문화",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [5, 6, 9, 10],
      goodMonths: [4, 7, 8],
      note: "중세 도시, 역사 유적.",
    },
    {
      name: "마누엘 안토니오",
      country: "코스타리카",
      continent: "미주",
      vibe: "열대우림 & 해변",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "휴양",
      bestMonths: [12, 1, 2, 3, 4],
      goodMonths: [11],
      note: "국립공원, 야생동물.",
    },
    {
      name: "리몬",
      country: "코스타리카",
      continent: "미주",
      vibe: "카리브해 문화",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [2, 3, 9, 10],
      goodMonths: [1, 4, 8, 11],
      note: "카리브해 해변, 문화.",
    },
    {
      name: "우유니 소금사막",
      country: "볼리비아",
      continent: "미주",
      vibe: "천공의 거울",
      budget: "중간(500만원 ~ 800만원)",
      travelType: "관광",
      bestMonths: [12, 1, 2, 3],
      goodMonths: [11, 4],
      note: "세계 최대 소금사막.",
    },
    {
      name: "아바나",
      country: "쿠바",
      continent: "미주",
      vibe: "빈티지 & 음악",
      budget: "매우 높음(1200만원 ~)",
      travelType: "관광",
      bestMonths: [11, 12, 1, 2, 3, 4],
      goodMonths: [5, 10],
      note: "올드카, 라틴 음악, 시가.",
    },
  ];

  // 색상 팔레트: 주요 UI 색상 값 정의
  const colors = {
    primary: "#0265D2", // 주요 색상
    secondary: "#FFFFFF", // 보조 색상
    background: "#EAF2FF", // 배경 색상
    text: "#3B3B3B", // 텍스트 색상
    danger: "#F13E3E", // 경고/위험 색상
    accent: "#FB8C00", // 강조 색상
    good: "#4CAF50", // GOOD 시즌 색상
    info: "#6B6B6B", // 정보 색상
  };

  // 국가명을 ISO 국가코드로 변환하는 함수
  function getCountryCode(country) {
    // 국가명-코드 매핑 객체
    const codes = {
      인도네시아: "id",
      태국: "th",
      베트남: "vn",
      일본: "jp",
      필리핀: "ph",
      말레이시아: "my",
      중국: "cn",
      몽골: "mn",
      네팔: "np",
      아랍에미리트: "ae",
      튀르키예: "tr",
      몰디브: "mv",
      싱가포르: "sg",
      호주: "au",
      "프렌치 폴리네시아": "pf",
      뉴질랜드: "nz",
      피지: "fj",
      "뉴칼레도니아·바누아투": "nc",
      사모아: "ws",
      프랑스: "fr",
      이탈리아: "it",
      스위스: "ch",
      오스트리아: "at",
      스페인: "es",
      포르투갈: "pt",
      독일: "de",
      노르웨이: "no",
      핀란드: "fi",
      스웨덴: "se",
      그리스: "gr",
      영국: "gb",
      체코: "cz",
      크로아티아: "hr",
      슬로베니아: "si",
      덴마크: "dk",
      헝가리: "hu",
      폴란드: "pl",
      미국: "us",
      캐나다: "ca",
      멕시코: "mx",
      코스타리카: "cr",
      쿠바: "cu",
      칠레: "cl",
      페루: "pe",
      볼리비아: "bo",
      바하마: "bs",
      브라질: "br",
      아르헨티나: "ar",
      탄자니아: "tz",
      케냐: "ke",
      모로코: "ma",
      이집트: "eg",
      모리셔스: "mu",
      세이셸: "sc",
    };
    return codes[country] || "un";
  }

  // 예산 문자열을 카테고리(낮음/중간/높음/매우 높음)로 변환하는 함수
  function parseBudgetCategory(budgetStr) {
    if (!budgetStr || typeof budgetStr !== "string") return null;
    if (budgetStr.includes("매우")) return "매우 높음";
    if (budgetStr.includes("높음")) return "높음";
    if (budgetStr.includes("중간")) return "중간";
    if (budgetStr.includes("낮음") || budgetStr.includes("~500")) return "낮음";
    // 숫자 기반 예산 추정 (예: "500만원")
    const m = budgetStr.match(/(\d+)만원/);
    if (m) {
      const v = parseInt(m[1], 10);
      if (v <= 500) return "낮음";
      if (v <= 800) return "중간";
      if (v <= 1200) return "높음";
      return "매우 높음";
    }
    return null;
  }

  // 모든 여행지에 예산 카테고리 미리 계산하여 추가
  if (typeof destinationsData !== "undefined") {
    destinationsData.forEach((dest) => {
      dest.budgetCategory = parseBudgetCategory(dest.budget);
    });
  }

  // 현재 화면 뷰 상태 (intro/guide)
  let currentView = "intro";
  // 현재 사용자 ID
  let currentUserId = null;
  // 알림 타임아웃 핸들러
  let notificationTimeout = null;
  // 선택된 필터 값들
  let selectedMonth = 0;
  let selectedContinent = "모두";
  let selectedBudget = "모두";
  let selectedPurpose = "모두";
  let isFiltered = false;

  // 여행 일정 정보: 여행지별 대표 일정 및 코스
  const tripDurations = {
    발리: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→발리 도착, 호텔 체크인",
        "Day 2: 우붓 투어 (테갈랄랑 계단식 논, 원숭이숲)",
        "Day 3: 스미냑 해변, 선셋 바 방문",
        "Day 4: 울루와뚜 사원, 케착 댄스 관람",
        "Day 5: 누사두아 해양 스포츠",
        "Day 6: 스파&쇼핑, 호텔에서 휴식",
        "Day 7: 발리→인천 귀국",
      ],
    },
    롬복: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→롬복 도착",
        "Day 2: 길리 트라왕안 스노클링",
        "Day 3: 길리 메노 자전거 투어",
        "Day 4: 센기기 해변 휴양",
        "Day 5: 사사 전통 마을 투어",
        "Day 6: 호텔에서 휴식",
        "Day 7: 롬복→인천",
      ],
    },
    몰디브: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→몰디브 도착, 수상비행기 이동",
        "Day 2-5: 리조트에서 휴양 (스노클링, 선셋 크루즈)",
        "Day 6: 스파&휴식",
        "Day 7: 몰디브→인천",
      ],
    },
    "푸켓·카오락": {
      days: "5박6일",
      itinerary: [
        "Day 1: 인천→푸켓 도착",
        "Day 2: 피피섬 투어",
        "Day 3: 팡아만 제임스본드 섬",
        "Day 4: 카론/파통 해변 휴양",
        "Day 5: 빅붓다, 왓샬롱 사원",
        "Day 6: 푸켓→인천",
      ],
    },
    코사무이: {
      days: "4박6일",
      itinerary: [
        "Day 1: 인천→방콕→사무이",
        "Day 2: 앙통 해양공원 투어",
        "Day 3: 차웽/라마이 해변",
        "Day 4: 스파&휴식",
        "Day 5-6: 사무이→인천",
      ],
    },
    "방콕·치앙마이": {
      days: "5박6일",
      itinerary: [
        "Day 1: 인천→방콕",
        "Day 2: 왕궁, 왓포, 야시장",
        "Day 3: 방콕→치앙마이",
        "Day 4: 도이수텝, 나이트바자",
        "Day 5: 코끼리 캠프",
        "Day 6: 치앙마이→인천",
      ],
    },
    "다낭·호이안": {
      days: "4박5일",
      itinerary: [
        "Day 1: 인천→다낭",
        "Day 2: 바나힐, 골든브릿지",
        "Day 3: 호이안 구시가, 야시장",
        "Day 4: 미케비치 휴양",
        "Day 5: 다낭→인천",
      ],
    },
    푸꾸옥: {
      days: "4박6일",
      itinerary: [
        "Day 1: 인천→호치민→푸꾸옥",
        "Day 2-4: 사오비치, 스노클링, 선셋 크루즈",
        "Day 5: 나이트마켓",
        "Day 6: 푸꾸옥→인천",
      ],
    },
    나트랑: {
      days: "4박5일",
      itinerary: [
        "Day 1: 인천→나트랑",
        "Day 2: 4개섬 투어",
        "Day 3: 빈펄랜드",
        "Day 4: 머드스파",
        "Day 5: 나트랑→인천",
      ],
    },
    "도쿄·교토": {
      days: "5박6일",
      itinerary: [
        "Day 1: 인천→도쿄",
        "Day 2: 아사쿠사, 스카이트리",
        "Day 3: 도쿄→교토 (신칸센)",
        "Day 4: 기요미즈데라, 기온",
        "Day 5: 후시미이나리",
        "Day 6: 교토→인천",
      ],
    },
    삿포로: {
      days: "4박5일",
      itinerary: [
        "Day 1: 인천→삿포로",
        "Day 2: 오타루 운하",
        "Day 3: 후라노 라벤더",
        "Day 4: 스스키노, 온천",
        "Day 5: 삿포로→인천",
      ],
    },
    오키나와: {
      days: "3박4일",
      itinerary: [
        "Day 1: 인천→오키나와",
        "Day 2: 추라우미 수족관",
        "Day 3: 만자모, 미국촌",
        "Day 4: 오키나와→인천",
      ],
    },
    홋카이도: {
      days: "5박6일",
      itinerary: [
        "Day 1: 인천→삿포로",
        "Day 2: 노보리베츠 온천",
        "Day 3: 하코다테 야경",
        "Day 4: 오타루 운하",
        "Day 5: 삿포로 시내",
        "Day 6: 삿포로→인천",
      ],
    },
    "세부·보홀·보라카이": {
      days: "5박6일",
      itinerary: [
        "Day 1: 인천→세부",
        "Day 2: 오슬롭 고래상어",
        "Day 3: 보홀 초콜릿힐",
        "Day 4: 보라카이 화이트비치",
        "Day 5: 수상 액티비티",
        "Day 6: 세부→인천",
      ],
    },
    코타키나발루: {
      days: "4박5일",
      itinerary: [
        "Day 1: 인천→코타키나발루",
        "Day 2: 마누칸섬 투어",
        "Day 3: 키나발루 국립공원",
        "Day 4: 시내 야시장",
        "Day 5: 코타키나발루→인천",
      ],
    },
    랑카위: {
      days: "4박6일",
      itinerary: [
        "Day 1: 인천→쿠알라룸푸르→랑카위",
        "Day 2: 스카이브릿지",
        "Day 3: 섬 투어",
        "Day 4: 해변 휴양",
        "Day 5-6: 랑카위→인천",
      ],
    },
    "두바이·아부다비": {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→두바이",
        "Day 2: 부르즈칼리파, 두바이몰",
        "Day 3: 사막 사파리",
        "Day 4: 아부다비 세이크자예드 모스크",
        "Day 5: 팜주메이라",
        "Day 6-7: 두바이→인천",
      ],
    },
    이스탄불: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→이스탄불",
        "Day 2: 술탄아흐메트 모스크",
        "Day 3: 그랜드바자르",
        "Day 4: 보스포루스 크루즈",
        "Day 5: 카파도키아 투어",
        "Day 6: 자유시간",
        "Day 7-8: 이스탄불→인천",
      ],
    },
    싱가포르: {
      days: "3박5일",
      itinerary: [
        "Day 1: 인천→싱가포르",
        "Day 2: 마리나베이샌즈, 가든스바이더베이",
        "Day 3: 유니버셜 스튜디오",
        "Day 4: 센토사 비치",
        "Day 5: 싱가포르→인천",
      ],
    },
    시드니: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→시드니",
        "Day 2: 오페라하우스, 하버브릿지",
        "Day 3: 블루마운틴",
        "Day 4: 본다이비치",
        "Day 5: 시드니 시내 자유시간",
        "Day 6-9: 시드니→인천",
      ],
    },
    타히티: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→파페테",
        "Day 2: 타히티 섬 투어",
        "Day 3: 보라보라 이동",
        "Day 4-6: 오버워터 방갈로 휴양",
        "Day 7: 파페테 쇼핑",
        "Day 8-9: 타히티→인천",
      ],
    },
    뉴질랜드: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→오클랜드",
        "Day 2: 오클랜드→퀸스타운",
        "Day 3: 밀포드 사운드",
        "Day 4: 번지점프/스카이다이빙",
        "Day 5: 와나카 호수",
        "Day 6-9: 퀸스타운→인천",
      ],
    },
    피지: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→나디",
        "Day 2: 리조트 체크인, 휴양",
        "Day 3-5: 스노클링, 다이빙",
        "Day 6: 피지안 문화 체험",
        "Day 7: 피지→인천",
      ],
    },
    "뉴칼레도니아·바누아투": {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→누메아",
        "Day 2-3: 뉴칼레도니아 라군",
        "Day 4: 바누아투로 이동",
        "Day 5-6: 화산 투어",
        "Day 7-8: 누메아→인천",
      ],
    },
    "북부·중부·서부": {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→파리",
        "Day 2: 에펠탑, 루브르",
        "Day 3: 베르사유 궁전",
        "Day 4: 몽생미셸",
        "Day 5: 디즈니랜드",
        "Day 6-9: 파리→인천",
      ],
    },
    남부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→니스",
        "Day 2: 칸느, 모나코",
        "Day 3: 프로방스",
        "Day 4: 생폴드방스",
        "Day 5-8: 니스→인천",
      ],
    },
    북부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→밀라노",
        "Day 2: 밀라노 두오모",
        "Day 3: 베네치아 이동",
        "Day 4: 곤돌라 투어",
        "Day 5-9: 베네치아→인천",
      ],
    },
    중부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→로마",
        "Day 2: 콜로세움, 트레비 분수",
        "Day 3: 바티칸",
        "Day 4: 피렌체 이동",
        "Day 5: 우피치 미술관",
        "Day 6-9: 피렌체→인천",
      ],
    },
    남부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→나폴리",
        "Day 2: 폼페이",
        "Day 3: 아말피 해안",
        "Day 4: 카프리섬",
        "Day 5-8: 나폴리→인천",
      ],
    },
    "북부·중부": {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→취리히",
        "Day 2: 융프라우",
        "Day 3: 인터라켄",
        "Day 4: 루체른",
        "Day 5-9: 취리히→인천",
      ],
    },
    "남부·알프스": {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→제네바",
        "Day 2: 몽블랑",
        "Day 3: 체르마트",
        "Day 4: 마테호른",
        "Day 5-8: 제네바→인천",
      ],
    },
    북부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→바르셀로나",
        "Day 2: 사그라다 파밀리아",
        "Day 3: 구엘 공원",
        "Day 4: 람블라스 거리",
        "Day 5-9: 바르셀로나→인천",
      ],
    },
    중부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→마드리드",
        "Day 2: 프라도 미술관",
        "Day 3: 톨레도",
        "Day 4: 플라멩코 공연",
        "Day 5-8: 마드리드→인천",
      ],
    },
    남부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→세비야",
        "Day 2: 알카사르 궁전",
        "Day 3: 그라나다 알함브라",
        "Day 4: 론다",
        "Day 5-9: 세비야→인천",
      ],
    },
    "카나리아 제도": {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→테네리페",
        "Day 2-5: 해변 휴양",
        "Day 6: 테이데 국립공원",
        "Day 7-8: 테네리페→인천",
      ],
    },
    북부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→포르투",
        "Day 2: 포르투 와인 투어",
        "Day 3: 도우루 계곡",
        "Day 4-8: 포르투→인천",
      ],
    },
    "중부·남부": {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→리스본",
        "Day 2: 벨렘 탑",
        "Day 3: 신트라",
        "Day 4: 알가르브",
        "Day 5-8: 리스본→인천",
      ],
    },
    "마데이라 제도": {
      days: "5박7일",
      itinerary: ["Day 1: 인천→푼샬", "Day 2-5: 섬 휴양", "Day 6-7: 푼샬→인천"],
    },
    "북부·서부": {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→프랑크푸르트",
        "Day 2: 로텐부르크",
        "Day 3: 노이슈반슈타인",
        "Day 4-9: 프랑크푸르트→인천",
      ],
    },
    남부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→뮌헨",
        "Day 2: 뮌헨 시내",
        "Day 3: 알프스",
        "Day 4-8: 뮌헨→인천",
      ],
    },
    남부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→베르겐",
        "Day 2: 송네 피오르",
        "Day 3: 플롬 철도",
        "Day 4-9: 베르겐→인천",
      ],
    },
    중부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→베르겐",
        "Day 2: 중부 피오르",
        "Day 3-8: 베르겐→인천",
      ],
    },
    북부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→트롬쇠",
        "Day 2-5: 오로라 투어",
        "Day 6-8: 트롬쇠→인천",
      ],
    },
    남부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→헬싱키",
        "Day 2: 헬싱키 시내",
        "Day 3-8: 헬싱키→인천",
      ],
    },
    중부: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→헬싱키",
        "Day 2: 중부 호수",
        "Day 3-7: 헬싱키→인천",
      ],
    },
    북부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→로바니에미",
        "Day 2-5: 오로라 투어",
        "Day 6-8: 로바니에미→인천",
      ],
    },
    "남부·중부": {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→스톡홀름",
        "Day 2: 스톡홀름 시내",
        "Day 3-8: 스톡홀름→인천",
      ],
    },
    북부: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→스톡홀름",
        "Day 2: 북부 투어",
        "Day 3-7: 스톡홀름→인천",
      ],
    },
    그리스: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→아테네",
        "Day 2: 파르테논",
        "Day 3: 산토리니",
        "Day 4-5: 산토리니 휴양",
        "Day 6-9: 아테네→인천",
      ],
    },
    영국: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→런던",
        "Day 2: 대영박물관",
        "Day 3: 빅벤, 타워브릿지",
        "Day 4-9: 런던→인천",
      ],
    },
    체코: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→프라하",
        "Day 2: 프라하 성",
        "Day 3: 구시가 광장",
        "Day 4-8: 프라하→인천",
      ],
    },
    크로아티아: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→두브로브니크",
        "Day 2: 성벽 투어",
        "Day 3: 스플리트",
        "Day 4-9: 두브로브니크→인천",
      ],
    },
    슬로베니아: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→류블랴나",
        "Day 2: 블레드 호수",
        "Day 3-7: 류블랴나→인천",
      ],
    },
    덴마크: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→코펜하겐",
        "Day 2: 인어공주상",
        "Day 3-7: 코펜하겐→인천",
      ],
    },
    서부: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→LA",
        "Day 2: 할리우드",
        "Day 3: 그랜드캐니언",
        "Day 4-9: LA→인천",
      ],
    },
    동부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→뉴욕",
        "Day 2: 자유의 여신상",
        "Day 3: 타임스퀘어",
        "Day 4-8: 뉴욕→인천",
      ],
    },
    하와이: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→호놀룰루",
        "Day 2: 와이키키 해변",
        "Day 3: 다이아몬드헤드",
        "Day 4-7: 호놀룰루→인천",
      ],
    },
    "괌·사이판": {
      days: "4박5일",
      itinerary: [
        "Day 1: 인천→괌",
        "Day 2: 투몬 비치",
        "Day 3: 스노클링",
        "Day 4-5: 괌→인천",
      ],
    },
    "서부·동부": {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→밴쿠버",
        "Day 2: 캐필라노 다리",
        "Day 3: 나이아가라 폭포",
        "Day 4-9: 밴쿠버→인천",
      ],
    },
    중부: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→밴쿠버",
        "Day 2: 로키산맥",
        "Day 3-8: 밴쿠버→인천",
      ],
    },
    칸쿤: {
      days: "5박7일",
      itinerary: [
        "Day 1: 인천→칸쿤",
        "Day 2: 카리브해 휴양",
        "Day 3: 치첸이트사",
        "Day 4-7: 칸쿤→인천",
      ],
    },
    칠레: {
      days: "8박10일",
      itinerary: [
        "Day 1: 인천→산티아고",
        "Day 2: 발파라이소",
        "Day 3: 파타고니아",
        "Day 4-10: 산티아고→인천",
      ],
    },
    페루: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→리마",
        "Day 2: 쿠스코",
        "Day 3: 마추픽추",
        "Day 4-9: 리마→인천",
      ],
    },
    바하마: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→나소",
        "Day 2: 핑크샌드 비치",
        "Day 3-8: 나소→인천",
      ],
    },
    브라질: {
      days: "8박10일",
      itinerary: [
        "Day 1: 인천→리우",
        "Day 2: 예수상",
        "Day 3: 아마존",
        "Day 4-10: 리우→인천",
      ],
    },
    아르헨티나: {
      days: "8박10일",
      itinerary: [
        "Day 1: 인천→부에노스",
        "Day 2: 탱고 공연",
        "Day 3: 이과수 폭포",
        "Day 4-10: 부에노스→인천",
      ],
    },
    세렝게티: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→아루샤",
        "Day 2-5: 사파리",
        "Day 6-9: 아루샤→인천",
      ],
    },
    잔지바르: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→잔지바르",
        "Day 2-5: 해변 휴양",
        "Day 6-8: 잔지바르→인천",
      ],
    },
    나이로비: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→나이로비",
        "Day 2-5: 마사이마라",
        "Day 6-8: 나이로비→인천",
      ],
    },
    카사블랑카: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→카사블랑카",
        "Day 2: 하산2세 모스크",
        "Day 3-8: 카사블랑카→인천",
      ],
    },
    마라케시: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→마라케시",
        "Day 2: 제마 엘 프나",
        "Day 3: 사하라",
        "Day 4-8: 마라케시→인천",
      ],
    },
    카이로: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→카이로",
        "Day 2: 피라미드",
        "Day 3: 스핑크스",
        "Day 4-8: 카이로→인천",
      ],
    },
    "아스완·룩소르": {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→룩소르",
        "Day 2: 카르나크 신전",
        "Day 3: 나일강 크루즈",
        "Day 4-9: 룩소르→인천",
      ],
    },
    후루가다: {
      days: "6박8일",
      itinerary: [
        "Day 1: 인천→후루가다",
        "Day 2-5: 홍해 다이빙",
        "Day 6-8: 후루가다→인천",
      ],
    },
    모리셔스: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→모리셔스",
        "Day 2-6: 리조트 휴양",
        "Day 7-9: 모리셔스→인천",
      ],
    },
    세이셸: {
      days: "7박9일",
      itinerary: [
        "Day 1: 인천→마헤",
        "Day 2: 프랄린섬",
        "Day 3-6: 해변 휴양",
        "Day 7-9: 마헤→인천",
      ],
    },
  };

  // 여행지 상세 정보 모달을 띄우는 함수
  function showMapModal(dest) {
    // 여행지별 일정 정보 가져오기
    const tripInfo = tripDurations[dest.name] || {
      days: "5박7일",
      itinerary: ["정보 준비중입니다"],
    };
    // 모달 생성 및 내용 삽입
    const modal = document.createElement("div");
    modal.className = "modal active";
    modal.innerHTML = `
  <div class="modal-content" style="max-width: 1000px;">
    <div class="modal-header border-b px-4 py-3 flex items-center justify-between">
      <div class="modal-title"></div>
      <button onclick="closeModal()" aria-label="닫기" class="text-gray-600 hover:text-gray-800 focus:ring-2 focus:ring-primary rounded" tabindex="0">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
    <div class="map-container">
      <iframe width="100%" height="100%" frameborder="0" style="border:0" 
        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=${encodeURIComponent(
          dest.name + ", " + dest.country
        )}&zoom=10" 
        allowfullscreen></iframe>
    </div>
    <div class="p-6">
      <h3 class="text-2xl font-bold mb-4" style="color: ${colors.primary}">${
      dest.name
    }, ${dest.country}</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="flex items-center">
          <i data-lucide="plane" class="w-5 h-5 mr-2" style="color: ${
            colors.accent
          };"></i>
          <p class="text-base"><strong>비행시간:</strong> <span style="color: ${
            colors.primary
          };">${flightTimes[dest.country] || "정보 없음"}</span></p>
        </div>
        <div class="flex items-center">
          <i data-lucide="calendar" class="w-5 h-5 mr-2" style="color: ${
            colors.info
          };"></i>
          <p class="text-base"><strong>평균 일정:</strong> <span style="color: ${
            colors.primary
          };">${tripInfo.days}</span></p>
        </div>
      </div>
      <p class="text-gray-600 mb-4">${dest.note}</p>
      <div class="bg-gray-50 rounded-xl p-4 mb-4">
        <h4 class="text-lg font-bold mb-3 flex items-center" style="color: ${
          colors.primary
        };">
          <i data-lucide="map" class="w-5 h-5 mr-2"></i>
          대표 신혼여행 코스
        </h4>
        <div class="space-y-2">
          ${tripInfo.itinerary
            .map(
              (item, idx) => `
              <div class="flex items-start">
                <div class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold mr-3" style="background-color: ${
                  colors.primary
                };">
                  ${idx + 1}
                </div>
                <p class="text-sm text-gray-700 pt-1">${item}</p>
              </div>
          `
            )
            .join("")}
        </div>
      </div>
      <button onclick="closeModal()" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-xl hover:opacity-90 transition" style="background-color: ${
        colors.primary
      };">닫기</button>
    </div>
  </div>
`;
    document.body.appendChild(modal);
    modal.onclick = (e) => {
      if (e.target === modal) closeModal();
    };
    if (typeof lucide !== "undefined" && lucide.createIcons)
      lucide.createIcons();
  }

  // 모달 닫기 함수
  window.closeModal = function () {
    const modal = document.querySelector(".modal");
    if (modal) modal.remove();
  };

  // ESC 키로 모달 닫기 이벤트
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      closeModal();
    }
  });

  // 전체 앱 렌더링 함수
  function renderApp() {
    const root = document.getElementById("root");
    root.className = "p-4 md:p-8 min-h-screen";
    root.style.backgroundColor = colors.background;
    root.style.color = colors.text;
    root.innerHTML = `<main class="max-w-7xl mx-auto">${renderHeader()}${
      currentView === "intro" ? renderIntroPage() : renderGuidePage()
    }</main>`;
    attachEventListeners();
    if (typeof lucide !== "undefined" && lucide.createIcons)
      lucide.createIcons();
  }

  // 화면 뷰 변경 함수
  function setView(viewName) {
    currentView = viewName;
    renderApp();
  }

  // 헤더 렌더링 함수
  function renderHeader() {
    const titleColor = currentView === "intro" ? colors.text : colors.primary;
    return `<header class="text-center mb-10 p-6 bg-white rounded-3xl shadow-2xl border-b-8 border-r-4" style="border-color: ${
      colors.primary
    }AA;">
            <h1 id="header-title" class="flex items-center justify-center text-3xl md:text-6xl font-black tracking-tight mb-4 cursor-pointer transition duration-200 hover:text-primary" style="color: ${titleColor};">
                <i data-lucide="map-pin" class='inline-block w-8 h-8 md:w-10 md:h-10 mr-3 align-text-bottom' style='color: ${
                  colors.primary
                }; fill: ${colors.primary}33;'></i>
                <p>온라인 허니문 플래너</p>
            </h1>
            <p class="text-lg md:text-2xl font-medium" style="color: ${
              colors.primary
            };">${
      currentView === "intro"
        ? "두 분만을 위한 완벽한 여행지를 찾아보세요!"
        : "여행지 필터링 및 추천 가이드 🗺️"
    }</p>
        </header>`;
  }

  // 인트로 페이지 렌더링 함수 (시작 화면)
  function renderIntroPage() {
    return `<div class="flex flex-col items-center justify-center min-h-[70vh] text-center p-8">
            <i data-lucide="plane" class="w-16 h-16 mb-6 animate-bounce-slow" style="color: ${colors.primary}; stroke-width: 1.5;"></i>
            <p class="text-2xl md:text-3xl font-semibold mb-3" style="color: ${colors.info};">똑딱부부💑가 안내하는 로맨틱 여행</p>
            <h2 class="text-3xl md:text-6xl font-black text-gray-800 tracking-tight mb-8">✈️ 허니문, 어디로 떠날까요? 🌍</h2>
            <p class="text-xl md:text-2xl text-gray-600 mb-12 max-w-3xl font-light">두 분의 여행 스타일, 원하는 시기, 그리고 예산을 고려한 <span class='font-semibold' style="color: ${colors.primary};">가장 완벽한 신혼여행지</span>를 찾아 드립니다.</p>
            <button id="start-button" class="bg-primary text-white font-extrabold text-xl py-4 px-12 rounded-full shadow-xl hover:bg-opacity-90 transition duration-300 transform hover:scale-[1.05] active:scale-95 border-b-4 border-primary/80" style="background-color: ${colors.primary}; border-color: ${colors.primary}CC;">
                <i data-lucide="search" class="w-6 h-6 inline-block mr-3"></i>나만의 여행지 추천받기
            </button>
        </div>`;
  }

  // 여행지 카드 렌더링 함수
  function renderDestinationCard(dest) {
    const isBest =
      selectedMonth !== 0 && dest.bestMonths.includes(selectedMonth);
    const budgetColor = dest.budget.startsWith("매우 높음")
      ? colors.danger
      : colors.text;
    return `<div class="card bg-white rounded-3xl shadow-2xl overflow-hidden transition duration-300 transform hover:scale-[1.03] cursor-pointer ${
      isBest ? "border-4" : "border-gray-50"
    }" onclick="showMapModal(${JSON.stringify(dest).replace(
      /"/g,
      "&quot;"
    )})" style="${isBest ? "border-color: " + colors.primary : ""};">
            <div class="flex justify-between items-center px-6 pt-4 pb-2 bg-gray-50/50">
                <h3 class="text-xs font-medium uppercase" style="color: ${
                  colors.primary
                };">${dest.continent} 허니문</h3>
                <i data-lucide="plane" class="w-5 h-5 -rotate-45" style="color: ${
                  colors.primary
                }; fill: ${colors.primary}33;"></i>
            </div>
            <div class="p-6 pb-4 border-b border-gray-100 ${
              isBest ? "bg-best/10" : ""
            }" style="${
      isBest ? "background-color: " + colors.primary + "1A" : ""
    };">
                <h2 class="text-3xl font-black text-gray-900 mb-1 flex items-center">
                    <img src="https://flagcdn.com/w40/${getCountryCode(
                      dest.country
                    )}.png" alt="${
      dest.country
    } 국기" class="w-8 h-6 mr-3 rounded shadow-sm" onerror="this.style.display='none'">
                    <span>${dest.name}</span>
                </h2>
                <span class="ml-9 text-base font-normal text-gray-500">${
                  dest.country
                }</span>
            </div>
            <div class="p-6 space-y-5">
                <div class="flex items-start"><i data-lucide="heart" class="w-5 h-5 flex-shrink-0 mt-1 mr-3 fill-current" style="color: ${
                  colors.info
                }; fill: ${colors.info};"></i>
                    <div><p class="text-sm font-semibold text-gray-700">여행 분위기</p><p class="text-base text-gray-900 font-medium">${
                      dest.vibe
                    } <span class='text-sm italic'>(${
      dest.travelType
    })</span></p></div>
                </div>
                <div class="flex items-start"><i data-lucide="wallet" class="w-5 h-5 flex-shrink-0 mt-1 mr-3 fill-current" style="color: ${
                  colors.accent
                }; fill: ${colors.accent};"></i>
                    <div><p class="text-sm font-semibold text-gray-700">예상 예산대 (7일/2인 기준)</p><p class="text-lg font-extrabold" style="color: ${budgetColor};">${
      dest.budget
    } <span class="text-xs text-gray-500">(항공, 숙소, 식비 포함 추정치)</span></p></div>
                </div>
                <div class="flex items-start border-t pt-4 border-gray-100"><i data-lucide="message-square" class="w-5 h-5 text-gray-500 flex-shrink-0 mt-1 mr-3"></i>
                    <div><p class="text-sm font-semibold text-gray-700">똑딱부부 Tip</p><p class="text-sm text-gray-600 italic">${
                      dest.note
                    }</p></div>
                </div>
            </div>
            <div class="p-6 pt-4 bg-gray-50/50 border-t border-gray-100">
                <p class="text-xs font-medium text-gray-500 mb-1"><span class="font-bold" style="color: ${
                  colors.primary
                };">BEST</span> & <span class="font-bold" style="color: ${
      colors.good
    };">GOOD</span> 시즌:</p>
                <div class="flex flex-wrap gap-2">
                    ${[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
                      .map((m) => {
                        let tagClass = "bg-gray-100 text-gray-600";
                        let tagStyle = "";
                        if (dest.bestMonths.includes(m)) {
                          tagClass = "text-white font-bold shadow-sm";
                          tagStyle = `background-color: ${colors.primary};`;
                        } else if (dest.goodMonths.includes(m)) {
                          tagClass = "text-gray-800 font-medium";
                          tagStyle = `background-color: ${colors.good}CC;`;
                        }
                        return `<span class="text-xs py-1 px-3 rounded-full ${tagClass}" style="${tagStyle}">${m}월</span>`;
                      })
                      .join("")}
                </div>
            </div>
        </div>`;
  }

  // 여행지 추천/필터링 페이지 렌더링 함수
  function renderGuidePage() {
    // 여행지 필터링 및 정렬 함수
    const filterAndSortDestinations = () => {
      if (!isFiltered) return destinationsData;
      let list = destinationsData.filter((dest) => {
        // 달, 대륙, 예산, 목적 필터링
        const monthMatch =
          selectedMonth === 0 ||
          dest.bestMonths.includes(selectedMonth) ||
          dest.goodMonths.includes(selectedMonth);
        const continentMatch =
          selectedContinent === "모두" || dest.continent === selectedContinent;
        // 예산 카테고리로 비교
        const budgetMatch =
          selectedBudget === "모두" ||
          (selectedBudget && dest.budgetCategory === selectedBudget);
        const purposeMatch =
          selectedPurpose === "모두" ||
          dest.travelType.includes(selectedPurpose);
        return monthMatch && continentMatch && budgetMatch && purposeMatch;
      });
      // BEST 시즌 우선 정렬
      if (selectedMonth !== 0)
        list.sort((a, b) => {
          const isABest = a.bestMonths.includes(selectedMonth);
          const isBBest = b.bestMonths.includes(selectedMonth);
          return isABest && !isBBest
            ? -1
            : !isABest && isBBest
            ? 1
            : a.name.localeCompare(b.name, "ko");
        });
      return list;
    };
    const filteredDestinations = filterAndSortDestinations();
    let content = !isFiltered
      ? `<div class="col-span-full text-center text-gray-500 p-12 bg-white rounded-2xl shadow-inner border-dashed border-2 border-gray-200"><i data-lucide="globe" class='w-12 h-12 mx-auto mb-4' style='color: ${colors.info};'></i><p class="text-xl font-semibold mb-2" style="color: ${colors.text};">필터를 선택하고 '여행지 검색' 버튼을 눌러보세요!</p><p class="text-gray-500">두 분이 꿈꾸는 완벽한 여행지를 찾아드립니다 ✨</p></div>`
      : filteredDestinations.length === 0
      ? `<div class="col-span-full text-center p-12 bg-white rounded-2xl shadow-inner border-dashed border-2" style="border-color: ${colors.primary}80;"><i data-lucide="cloud-off" class='w-12 h-12 mx-auto mb-4' style='color: ${colors.primary};'></i><p class="text-xl font-semibold mb-2" style="color: ${colors.primary};">😭 아쉽게도 해당 조건에 맞는 추천 여행지가 없습니다.</p><p class="text-gray-600">다른 달이나 대륙을 선택하여 로맨틱한 여행지를 다시 찾아보세요!</p></div>`
      : filteredDestinations.map(renderDestinationCard).join("");
    return `<div id="filter-bar" class="bg-white p-6 rounded-2xl shadow-xl mb-10 flex flex-col lg:flex-row gap-4 items-center justify-between border-b-4" style="border-color: ${
      colors.primary
    }AA;">
            <div class="w-full lg:w-auto flex-grow"><label for="month-select" class="block text-sm font-bold text-gray-700 mb-1" style="color: ${
              colors.text
            };">여행 희망 달</label>
                <select id="month-select" class="w-full lg:w-40 border-2 rounded-xl p-3 transition duration-150 ease-in-out bg-secondary text-gray-800 shadow-sm focus:ring-2 focus:ring-accent" style="border-color: ${
                  colors.primary
                }55; background-color: ${colors.secondary};">
                    <option value="0">-- 모든 달 📅 --</option>${[
                      ...Array(12).keys(),
                    ]
                      .map(
                        (i) =>
                          `<option value="${i + 1}" ${
                            selectedMonth === i + 1 ? "selected" : ""
                          }>${i + 1}월</option>`
                      )
                      .join("")}
                </select>
            </div>
            <div class="w-full lg:w-auto flex-grow"><label for="continent-select" class="block text-sm font-bold text-gray-700 mb-1" style="color: ${
              colors.text
            };">대륙</label>
                <select id="continent-select" class="w-full lg:w-40 border-2 rounded-xl p-3 transition duration-150 ease-in-out bg-secondary text-gray-800 shadow-sm focus:ring-2 focus:ring-accent" style="border-color: ${
                  colors.primary
                }55; background-color: ${colors.secondary};">
                    <option value="모두">-- 모든 대륙 🌎 --</option>${[
                      "아시아",
                      "오세아니아",
                      "유럽",
                      "미주",
                      "아프리카",
                    ]
                      .map(
                        (c) =>
                          `<option value="${c}" ${
                            selectedContinent === c ? "selected" : ""
                          }>${c}</option>`
                      )
                      .join("")}
                </select>
            </div>
            <div class="w-full lg:w-auto flex-grow"><label for="budget-select" class="block text-sm font-bold text-gray-700 mb-1" style="color: ${
              colors.text
            };">예산대</label>
                <select id="budget-select" class="w-full lg:w-40 border-2 rounded-xl p-3 transition duration-150 ease-in-out bg-secondary text-gray-800 shadow-sm focus:ring-2 focus:ring-accent" style="border-color: ${
                  colors.primary
                }55; background-color: ${colors.secondary};">
                    <option value="모두">-- 모든 예산 💰 --</option>${[
                      "낮음",
                      "중간",
                      "높음",
                      "매우 높음",
                    ]
                      .map(
                        (b) =>
                          `<option value="${b}" ${
                            selectedBudget === b ? "selected" : ""
                          }>${b}</option>`
                      )
                      .join("")}
                </select>
            </div>
            <div class="w-full lg:w-auto flex-grow"><label for="purpose-select" class="block text-sm font-bold text-gray-700 mb-1" style="color: ${
              colors.text
            };">여행 목적</label>
                <select id="purpose-select" class="w-full lg:w-40 border-2 rounded-xl p-3 transition duration-150 ease-in-out bg-secondary text-gray-800 shadow-sm focus:ring-2 focus:ring-accent" style="border-color: ${
                  colors.primary
                }55; background-color: ${colors.secondary};">
                    <option value="모두">-- 모든 목적 🎯 --</option>${[
                      "휴양",
                      "관광",
                      "액티비티",
                    ]
                      .map(
                        (p) =>
                          `<option value="${p}" ${
                            selectedPurpose === p ? "selected" : ""
                          }>${p}</option>`
                      )
                      .join("")}
                </select>
            </div>
            <button id="search-button" class="mt-5 md:mt-0 w-full md:w-auto md:ml-auto text-white font-black text-lg py-3 px-8 rounded-xl shadow-xl hover:opacity-95 transition duration-200 ease-in-out flex items-center justify-center transform active:scale-95" style="background-color: ${
              colors.primary
            };">
                <i data-lucide="search" class="w-5 h-5 mr-3"></i> 여행지 검색
            </button>
        </div>
        <div id="destinations-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">${content}</div>`;
  }

  // 여행지 검색 버튼 클릭 시 필터 적용 함수
  function handleSearch() {
    isFiltered = true;
    renderApp();
  }
  // 필터 값 변경 시 처리 함수
  function handleFilterChange(e) {
    const target = e.target;
    if (target.id === "month-select") selectedMonth = parseInt(target.value);
    else if (target.id === "continent-select") selectedContinent = target.value;
    else if (target.id === "budget-select") selectedBudget = target.value;
    else if (target.id === "purpose-select") selectedPurpose = target.value;
    isFiltered = false;
    renderApp();
  }

  // 암호 입력 모달 표시 함수
  function showPasswordModal() {
    const modal = document.createElement("div");
    modal.className = "modal active";
    modal.innerHTML = `
      <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header border-b px-4 py-3 flex items-center justify-between">
          <div class="modal-title"></div>
          <button onclick="closeModal()" aria-label="닫기" class="text-gray-600 hover:text-gray-800 focus:ring-2 focus:ring-primary rounded px-2 py-1" tabindex="0">
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>
        </div>
        <div class="p-8">
          <h3 class="text-3xl font-bold mb-4 text-center" style="color: ${colors.primary};">
            <i data-lucide="lock" class="w-8 h-8 inline-block mr-2"></i>
            암호 입력
          </h3>
                    <p class="text-gray-600 mb-6 text-center">해당 서비스를 이용하시려면 암호를 입력하세요</p>
                    <input type="password" id="password-input" class="w-full border-2 rounded-xl p-4 text-center text-2xl font-bold mb-4 focus:ring-2 focus:ring-primary focus:border-primary" style="border-color: ${colors.primary}55;" placeholder="암호 입력" maxlength="4">
                    <div id="password-error" class="text-red-500 text-sm text-center mb-4 hidden">❌ 암호가 일치하지 않습니다</div>
                    <div class="flex gap-3">
                        <button onclick="closeModal()" class="flex-1 bg-gray-300 text-gray-700 font-bold py-3 px-6 rounded-xl hover:bg-gray-400 transition">취소</button>
                        <button onclick="checkPassword()" class="flex-1 text-white font-bold py-3 px-6 rounded-xl hover:opacity-90 transition" style="background-color: ${colors.primary};">확인</button>
                    </div>
                </div>
            </div>
        `;
    document.body.appendChild(modal);
    const input = document.getElementById("password-input");
    input.focus();
    input.onkeypress = (e) => {
      if (e.key === "Enter") checkPassword();
    };
    modal.onclick = (e) => {
      if (e.target === modal) closeModal();
    };
    if (typeof lucide !== "undefined" && lucide.createIcons)
      lucide.createIcons();
  }

  // 암호 확인 함수
  window.checkPassword = function () {
    const input = document.getElementById("password-input");
    const error = document.getElementById("password-error");
    if (input.value === "0174") {
      closeModal();
      setView("guide");
    } else {
      error.classList.remove("hidden");
      input.value = "";
      input.focus();
      setTimeout(() => error.classList.add("hidden"), 2000);
    }
  };

  // 주요 버튼 및 필터 이벤트 리스너 등록 함수
  function attachEventListeners() {
    // 헤더 타이틀 클릭 시 인트로 화면으로 이동
    const headerTitle = document.getElementById("header-title");
    if (headerTitle) headerTitle.onclick = () => setView("intro");
    // 시작 버튼 클릭 시 암호 입력 모달 표시
    const startButton = document.getElementById("start-button");
    if (startButton) startButton.onclick = showPasswordModal;
    // 여행지 검색 버튼 및 필터 셀렉트 박스 이벤트 등록
    const searchButton = document.getElementById("search-button");
    if (searchButton) {
      searchButton.onclick = handleSearch;
      const monthSelect = document.getElementById("month-select");
      const continentSelect = document.getElementById("continent-select");
      const budgetSelect = document.getElementById("budget-select");
      const purposeSelect = document.getElementById("purpose-select");
      if (monthSelect) monthSelect.onchange = handleFilterChange;
      if (continentSelect) continentSelect.onchange = handleFilterChange;
      if (budgetSelect) budgetSelect.onchange = handleFilterChange;
      if (purposeSelect) purposeSelect.onchange = handleFilterChange;
    }
  }

  // 페이지 로드 시 초기화 및 앱 렌더링
  window.onload = () => {
    currentUserId = "user-" + Math.random().toString(36).substr(2, 9);
    renderApp();
  };
</script>
